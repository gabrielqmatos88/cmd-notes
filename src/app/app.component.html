<div class="container-fluid">
	<div class="row">
		<div class="col-md-8 offset-md-2" >
			<div class="page-header">
				<h1>
					XMO cmd
				</h1>
      </div>
      <div class="row">
        <div class="col-md-3">
          <ul class="cmd-list">
            <li class="bt-area">
              <div class="button-box text-right">
                  <button class="btn btn-success btn-small" (click)="setCmd()">+</button>
              </div>
            </li>
            <li class="cmd-item" *ngFor="let item of commandList" (click)="setCmd(item)">
                {{ item.name }}
            </li>
          </ul>
        </div>
        <div class="col-md-9">
          <div class="row" >
            <div class="col-sm-12">
              <form role="form" name="cmdForm" #form="ngForm" [hidden]="!selectedCommand" (submit)="save()" >
              <div class="form-group" [ngClass]="{ 'input-error': !name.valid && (name.dirty || submitted) }">
                <label for="name">
                  Name
                  <span class="field-error" *ngIf="!name.valid  && (name.dirty || submitted)">Preencha o nome</span>
                </label>
                <input type="text" class="form-control" id="name" name="name" [(ngModel)]="commandName" (change)="updateName($event)" #name="ngModel" required />

              </div>
              <div class="form-group" [ngClass]="{ 'input-error': !cmd.valid && (cmd.dirty || submitted) }">
                <label for="cmd">
                  Command Expression
                  <span class="field-error" *ngIf="!cmd.valid && (cmd.dirty || submitted)">Preencha o comando</span>
                </label>
                <input type="text" class="form-control" id="cmd" name="cmd" [(ngModel)]="commandStr" (change)="updateCommandStr($event)" #cmd="ngModel" required />
              </div>
              <button type="submit" class="btn btn-primary">
                Save
              </button>
              <button type="button" class="btn btn-primary bt2" (click)="doPreview()">
                Preview
              </button>
            </form>
          </div>
            <div class="col-md-12 preview-container border rounded" *ngIf="!!selectedCommand && preview && !!selectedCommand.parameters && selectedCommand.parameters.length">
              <h3>Preview</h3>
              <div class="row" *ngFor="let p of selectedCommand.parameters; let index=index">
                <div class="col-md-8">
                    <div class="form-group" >
                      <label for="{{index}}-{{p.name}}">
                        {{p.name}}
                      </label>
                      <input type="text" class="form-control" name="{{index}}-{{p.name}}" [(ngModel)]="p.value" required />
                    </div>
                </div>
              </div>
              <button type="button" class="btn btn-primary" (click)="generateCmd()">
                  Generate
                </button>
              <p *ngIf="!!generatedCommand" class="cmd-result border rounded">
                {{ generatedCommand }}
              </p>
            </div>
          </div>
        </div>
      </div>
		</div>
  </div>

</div>
